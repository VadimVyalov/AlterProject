{"mappings":"oeAAAA,EAAA,S,iCCAA,IAAAC,EAAAD,EAAA,S,aCAAE,EAAAF,EAAA,S,aAGA,MAAMG,EAAgB,cAGf,SAASC,EAAeC,GAC7B,IAAIC,GAAc,EAAAJ,EAAAK,QAAOF,GACzB,MAAMG,EAAWC,MAAMC,KAAKC,SAASC,iBAAiB,cAEtD,GAAIN,EAAa,CACf,MAAMO,EAAQP,EAAYQ,KAAIC,GAAKA,EAAEC,KACrCR,EAASS,SAAQF,IACf,GAAIF,EAAMK,SAASH,EAAEI,QAAQC,UAAW,CACtCL,EAAEM,UAAUC,IAAI,cACKP,EAAEQ,cAAc,gBACxBC,YAAc,sBAC7B,IAEJ,CACF,CDhBA,MAAMC,EAAY,WACZC,EAAgB,cAEhBC,EAAUhB,SAASY,cAAc,eACjCK,EAAejB,SAASY,cAAc,iBAE5C,SAASM,EAAaC,GACpB,IAAIxB,GAAc,EAAAJ,EAAAK,QAAOuB,GACzB7B,EAAA8B,YAAYC,OAAS,EACrB/B,EAAA8B,YAAYE,QAAQ3B,GACpB,IAAI4B,EAAW,aAEf,IAAK5B,EAEH,YADA6B,QAAQC,IAAI,iBAIdR,EAAaP,UAAUC,IAAI,mBAC3BK,EAAQN,UAAUgB,OAAO,mBAEzBH,EAAW5B,EAAY,GAAG4B,SAC1B5B,EAAY2B,KAAK,CAAEC,SAAU,MAC7B,MAAMI,EAAY,GAClBhC,EAAYW,SAAQF,IAClB,GAAImB,IAAanB,EAAEmB,SAAU,CAC3B,MAAMK,EAAY5B,SAAS6B,cAAc,OACzCD,EAAUE,UAAY,0BAA0BP,4JAEAjC,EAAAyC,2EAEhDf,EAAQgB,OAAOJ,GACf,MAAMK,EAAYjC,SAAS6B,cAAc,MACzCI,EAAUvB,UAAUC,IAAI,WACxBsB,EAAUH,UAAYH,EAAUxB,IAAIb,EAAA4C,YAAYC,KAAK,IACrDnB,EAAQgB,OAAOC,GACfV,EAAWnB,EAAEmB,SACbI,EAAUN,OAAS,CACrB,CACAM,EAAUL,KAAKlB,EAAA,IAEjBX,EAAesB,GACfpB,EAAYyC,OACZ,EAAA7C,EAAAK,QAAOkB,EAAWnB,EACpB,CAEA0C,OAAOC,iBAAiB,QAAQ,KAC9BpB,EAAaJ,EAAA,IASGd,SAASY,cAAc,aAE/B0B,iBAAiB,SCvCpB,SAAuBC,GAC5B,GAAIA,EAAEC,OAAO9B,UAAU+B,SAAS,sBAAuB,CACrD,MAAMC,EAAWH,EAAEC,OAAOG,QAAQ,iBAC5BC,EAAeF,EAAS9B,cAAc,gBACtCiC,EAASH,EAASlC,QAAQC,SAEhC,IAAId,GAAc,EAAAJ,EAAAK,QAAOJ,GACzBgC,QAAQC,IAAInC,EAAA8B,aACZ,IAAI0B,EAAaxD,EAAA8B,YAAY2B,MAAK3C,GAAKA,EAAEC,KAAOwC,IAEhD,GADArB,QAAQC,IAAIqB,IACPnD,EAMH,OALAA,EAAc,GACdA,EAAY2B,KAAKwB,IACjB,EAAAvD,EAAAyD,QAAOxD,EAAeG,GACtB+C,EAAShC,UAAUC,IAAI,mBACvBiC,EAAa/B,YAAc,wBAI7B,MAAMoC,EAAUtD,EAAYuD,WAAU9C,GAAKA,EAAEC,KAAOwC,IAEhDI,EAAU,GACZtD,EAAY2B,KAAKwB,IACjB,EAAAvD,EAAAyD,QAAOxD,EAAeG,GACtB+C,EAAShC,UAAUC,IAAI,cACvBiC,EAAa/B,YAAc,yBAE3BlB,EAAYwD,OAAOF,EAAS,IAE5B,EAAA1D,EAAAyD,QAAOxD,EAAeG,GACjBA,EAAY0B,SAAQ,EAAA9B,EAAA6D,UAAS5D,GAClCkD,EAAShC,UAAUgB,OAAO,cAC1BkB,EAAa/B,YAAc,kBAE/B,CACF","sources":["src/read-page.js","src/js/renderRead.js","src/js/apiCard.js"],"sourcesContent":["import './js/mob-input.js';\nimport './js/toggle-mode.js';\nimport './js/toggle-mode.js';\nimport './js/navigations.js';\nimport './js/renderRead';\n//import './js/home-page';\n","import { createCard, icon, arrLastData } from './apiNews';\nimport { saveLS, loadLS, removeLS } from './lStorage';\nimport { checkFavorites, togleFaforite, addRead } from './apiCard';\n\nconst READ_NEWS = 'readNews';\nconst FAIVORIT_NEWS = 'favoritNews';\n\nconst gallery = document.querySelector('.date-block');\nconst errorRequest = document.querySelector('.errorRequest');\n\nfunction renderFromLS(key) {\n  let favoritNews = loadLS(key);\n  arrLastData.length = 0;\n  arrLastData.push(...favoritNews);\n  let readDate = '0000/00/00';\n\n  if (!favoritNews) {\n    console.log('=============');\n    return;\n  }\n\n  errorRequest.classList.add('visually-hidden');\n  gallery.classList.remove('visually-hidden');\n\n  readDate = favoritNews[0].readDate;\n  favoritNews.push({ readDate: '0' });\n  const tempBlock = [];\n  favoritNews.forEach(i => {\n    if (readDate !== i.readDate) {\n      const dateTitle = document.createElement('div');\n      dateTitle.innerHTML = `<span class=\"btn-span\">${readDate}</span>\n                                    <svg class=\"icon-down-read-pg\" width=\"15\" height=\"9\">\n                                         <use href=\"${icon}#icon-arrow-down\"></use>\n                                    </svg>`;\n      gallery.append(dateTitle);\n      const dateBlock = document.createElement('UL');\n      dateBlock.classList.add('gallery');\n      dateBlock.innerHTML = tempBlock.map(createCard).join('');\n      gallery.append(dateBlock);\n      readDate = i.readDate;\n      tempBlock.length = 0;\n    }\n    tempBlock.push(i);\n  });\n  checkFavorites(FAIVORIT_NEWS);\n  favoritNews.pop();\n  loadLS(READ_NEWS, favoritNews);\n}\n\nwindow.addEventListener('load', () => {\n  renderFromLS(READ_NEWS);\n});\n\nfunction lostFavorite() {\n  let favoritNews = loadLS(key);\n  arrLastData.length = 0;\n  arrLastData.push(...favoritNews);\n}\n\nconst readBlock = document.querySelector('#readNews');\n\nreadBlock.addEventListener('click', togleFaforite);\n","import { saveLS, loadLS, removeLS } from './lStorage';\nimport { arrLastData } from './apiNews';\n\nconst FAIVORIT_NEWS = 'favoritNews';\nconst READ_NEWS = 'readNews';\n\nexport function checkFavorites(key) {\n  let favoritNews = loadLS(key);\n  const cardNews = Array.from(document.querySelectorAll('#cardNews'));\n\n  if (favoritNews) {\n    const allId = favoritNews.map(i => i.id);\n    cardNews.forEach(i => {\n      if (allId.includes(i.dataset.targetId)) {\n        i.classList.add('inFavorite');\n        const favoriteText = i.querySelector('#favorit-txt');\n        favoriteText.textContent = 'Remove from favorite';\n      }\n    });\n  }\n}\n\nexport function togleFaforite(e) {\n  if (e.target.classList.contains('js-tartet-favorite')) {\n    const itemNews = e.target.closest('.js-card-item');\n    const favoriteText = itemNews.querySelector('#favorit-txt');\n    const newsId = itemNews.dataset.targetId;\n\n    let favoritNews = loadLS(FAIVORIT_NEWS);\n    console.log(arrLastData);\n    let targetNews = arrLastData.find(i => i.id === newsId);\n    console.log(targetNews);\n    if (!favoritNews) {\n      favoritNews = [];\n      favoritNews.push(targetNews);\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      itemNews.classList.add('inFavorite');\n      favoriteText.textContent = 'Remove from favorite';\n      return;\n    }\n\n    const hasNews = favoritNews.findIndex(i => i.id === newsId);\n    //console.log(hasNews);\n    if (hasNews < 0) {\n      favoritNews.push(targetNews);\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      itemNews.classList.add('inFavorite');\n      favoriteText.textContent = 'Remove from favorite';\n    } else {\n      favoritNews.splice(hasNews, 1);\n\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      if (!favoritNews.length) removeLS(FAIVORIT_NEWS);\n      itemNews.classList.remove('inFavorite');\n      favoriteText.textContent = 'Add to favorite';\n    }\n  }\n}\n\nexport function addRead(e) {\n  e.preventDefault();\n  if (e.target.classList.contains('wrap-info__link')) {\n    const itemNews = e.target.closest('.js-card-item');\n    //  const favoriteText = itemNews.querySelector('#favorit-txt');\n    const newsId = itemNews.dataset.targetId;\n    itemNews.classList.add('inRead');\n    let readNews = loadLS(READ_NEWS);\n    const targetNews = arrLastData.find(i => i.id === newsId);\n    const readDate = new Date().toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n    });\n    targetNews.readDate = readDate;\n\n    if (!readNews) {\n      readNews = [];\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n\n      return;\n    }\n    const hasNews = readNews.findIndex(i => i.id === newsId);\n    if (hasNews < 0) {\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n    } else {\n      readNews.splice(hasNews, 1);\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n      if (!readNews.length) removeLS(READ_NEWS);\n    }\n  }\n}\n"],"names":["parcelRequire","$2ltYP","$h5mQC","$d444427a2d69d8dd$var$FAIVORIT_NEWS","$d444427a2d69d8dd$export$d50fb41c80be79e9","key","favoritNews","loadLS","cardNews","Array","from","document","querySelectorAll","allId","map","i","id","forEach","includes","dataset","targetId","classList","add","querySelector","textContent","$c45db3110c321658$var$READ_NEWS","$c45db3110c321658$var$FAIVORIT_NEWS","$c45db3110c321658$var$gallery","$c45db3110c321658$var$errorRequest","$c45db3110c321658$var$renderFromLS","key1","arrLastData","length","push","readDate","console","log","remove","tempBlock","dateTitle","createElement","innerHTML","icon","append","dateBlock","createCard","join","pop","window","addEventListener","e","target","contains","itemNews","closest","favoriteText","newsId","targetNews","find","saveLS","hasNews","findIndex","splice","removeLS"],"version":3,"file":"read.c68729fc.js.map"}