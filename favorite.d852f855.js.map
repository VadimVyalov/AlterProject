{"mappings":"oeAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,aAIA,MAAME,EAAgB,cAChBC,EAAUC,SAASC,cAAc,YACjCC,EAAeF,SAASC,cAAc,iBA2C5CE,OAAOC,iBAAiB,QAAQ,MAxChC,SAAsBC,GACpB,MAAMC,GAAc,EAAAC,EAAAC,QAAOH,GAE3B,IAAKC,EAEH,OAGFJ,EAAaO,UAAUC,IAAI,mBAC3BX,EAAQU,UAAUE,OAAO,mBACzBZ,EAAQa,UAAYN,EAAYO,IAAIhB,EAAAiB,YAAYC,KAAK,IAEpCC,MAAMC,KAAKjB,SAASkB,iBAAiB,cAE7CC,SAAQC,IACfA,EAAEX,UAAUC,IAAI,cACKU,EAAEnB,cAAc,gBACxBoB,YAAc,yBAE/B,CAsBEC,CAAaxB,EAAA,IAEfC,EAAQK,iBAAiB,SAtBzB,SAA4BmB,GAC1B,GAAIA,EAAEC,OAAOf,UAAUgB,SAAS,sBAAuB,CACrD,MAAMC,EAAWH,EAAEC,OAAOG,QAAQ,iBAC5BC,EAASF,EAASG,QAAQC,SAC1BxB,GAAc,EAAAC,EAAAC,QAAOV,GACrBiC,EAAUzB,EAAY0B,WAAUZ,GAAKA,EAAEa,KAAOL,IAEpDtB,EAAY4B,OAAOH,EAAS,IAC5B,EAAAxB,EAAA4B,QAAOrC,EAAeQ,GACjBA,EAAY8B,UACf,EAAA7B,EAAA8B,UAASvC,GACTI,EAAaO,UAAUE,OAAO,mBAC9BZ,EAAQU,UAAUC,IAAI,oBAGxBgB,EAASf,QACX,CACF","sources":["src/favorite-page.js","src/js/renderFavorite.js"],"sourcesContent":["import './js/mob-input.js';\nimport './js/toggle-mode.js';\nimport './js/navigations.js';\nimport './js/renderFavorite';\n","import { createCard } from './apiNews';\nimport { saveLS, loadLS, removeLS } from './lStorage';\n//import { checkFavorites } from './must-popular';\n\nconst FAIVORIT_NEWS = 'favoritNews';\nconst gallery = document.querySelector('.gallery');\nconst errorRequest = document.querySelector('.errorRequest');\n//visually - hidden;\n\nfunction renderFromLS(key) {\n  const favoritNews = loadLS(key);\n\n  if (!favoritNews) {\n    // console.log('=============');\n    return;\n  }\n\n  errorRequest.classList.add('visually-hidden');\n  gallery.classList.remove('visually-hidden');\n  gallery.innerHTML = favoritNews.map(createCard).join('');\n\n  const cardNews = Array.from(document.querySelectorAll('#cardNews'));\n\n  cardNews.forEach(i => {\n    i.classList.add('inFavorite');\n    const favoriteText = i.querySelector('#favorit-txt');\n    favoriteText.textContent = 'Remove from favorite';\n  });\n}\n\nfunction removeFromFavorite(e) {\n  if (e.target.classList.contains('js-tartet-favorite')) {\n    const itemNews = e.target.closest('.js-card-item');\n    const newsId = itemNews.dataset.targetId;\n    const favoritNews = loadLS(FAIVORIT_NEWS);\n    const hasNews = favoritNews.findIndex(i => i.id === newsId);\n\n    favoritNews.splice(hasNews, 1);\n    saveLS(FAIVORIT_NEWS, favoritNews);\n    if (!favoritNews.length) {\n      removeLS(FAIVORIT_NEWS);\n      errorRequest.classList.remove('visually-hidden');\n      gallery.classList.add('visually-hidden');\n    }\n\n    itemNews.remove();\n  }\n}\n\nwindow.addEventListener('load', () => {\n  renderFromLS(FAIVORIT_NEWS);\n});\ngallery.addEventListener('click', removeFromFavorite);\n"],"names":["parcelRequire","$2ltYP","$fcb6f3065e8f5857$var$FAIVORIT_NEWS","$fcb6f3065e8f5857$var$gallery","document","querySelector","$fcb6f3065e8f5857$var$errorRequest","window","addEventListener","key","favoritNews","$h5mQC","loadLS","classList","add","remove","innerHTML","map","createCard","join","Array","from","querySelectorAll","forEach","i","textContent","$fcb6f3065e8f5857$var$renderFromLS","e","target","contains","itemNews","closest","newsId","dataset","targetId","hasNews","findIndex","id","splice","saveLS","length","removeLS"],"version":3,"file":"favorite.d852f855.js.map"}