{"mappings":"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","sources":["src/read-page.js","src/js/renderRead.js","src/js/apiCard.js"],"sourcesContent":["import './js/mob-input.js';\nimport './js/toggle-mode.js';\nimport './js/toggle-mode.js';\nimport './js/navigations.js';\nimport './js/renderRead';\n//import './js/home-page';\n","import { createCard, icon, arrLastData } from './apiNews';\nimport { saveLS, loadLS, removeLS } from './lStorage';\nimport { checkFavorites, togleFaforite, addRead } from './apiCard';\n\nconst READ_NEWS = 'readNews';\nconst FAIVORIT_NEWS = 'favoritNews';\n\nconst gallery = document.querySelector('.date-block');\nconst errorRequest = document.querySelector('.errorRequest');\n\nfunction renderFromLS(key) {\n  let favoritNews = loadLS(key);\n  arrLastData.length = 0;\n  arrLastData.push(...favoritNews);\n  // console.log(arrLastData);\n  let readDate = '0000/00/00';\n\n  if (!favoritNews) {\n    console.log('=============');\n    return;\n  }\n\n  // console.log(favoritNews);\n  errorRequest.classList.add('visually-hidden');\n  gallery.classList.remove('visually-hidden');\n\n  readDate = favoritNews[0].readDate;\n  favoritNews.push({ readDate: '0' });\n  const tempBlock = [];\n  favoritNews.forEach(i => {\n    if (readDate !== i.readDate) {\n      const dateTitle = document.createElement('div');\n      dateTitle.innerHTML = `<span class=\"btn-span\">${readDate}</span>\n                                    <svg class=\"icon-down-read-pg\" width=\"15\" height=\"9\">\n                                         <use href=\"${icon}#icon-arrow-down\"></use>\n                                    </svg>`;\n      gallery.append(dateTitle);\n      const dateBlock = document.createElement('UL');\n      dateBlock.classList.add('gallery');\n      dateBlock.innerHTML = tempBlock.map(createCard).join('');\n      gallery.append(dateBlock);\n      readDate = i.readDate;\n      tempBlock.length = 0;\n    }\n    tempBlock.push(i);\n  });\n  checkFavorites(FAIVORIT_NEWS);\n  favoritNews.pop();\n  loadLS(READ_NEWS, favoritNews);\n}\n\nwindow.addEventListener('load', () => {\n  renderFromLS(READ_NEWS);\n});\n\nfunction lostFavorite() {\n  let favoritNews = loadLS(key);\n  arrLastData.length = 0;\n  arrLastData.push(...favoritNews);\n}\n\n// function loadFromRead(e) {\n//   //e.preventDefault();\n//   if (e.target.classList.contains('js-tartet-favorite')) {\n//     const itemNews = e.target.closest('.js-card-item');\n//     const favoriteText = itemNews.querySelector('#favorit-txt');\n//     const newsId = itemNews.dataset.targetId;\n\n//     const cardNews = Array.from(document.querySelectorAll('#cardNews'));\n//     const temp = loadLS(READ_NEWS);\n//     const arrLastData = [];\n//     arrLastData.push(...temp);\n\n//     console.log(arrLastData);\n//     let readNews = loadLS(FAIVORIT_NEWS);\n\n//     let targetNews = arrLastData.find(i => i.id === newsId);\n//     // console.log(targetNews);\n//     // console.log(arrLastData[targetNews]);\n\n//     if (!readNews) {\n//       readNews = [];\n//       readNews.push(targetNews);\n//       saveLS(FAIVORIT_NEWS, readNews);\n//       itemNews.classList.add('inFavorite');\n//       favoriteText.textContent = 'Remove from favorite';\n//       return;\n//     }\n\n//     const hasNews = readNews.findIndex(i => i.id === newsId);\n//     //console.log(hasNews);\n//     if (hasNews < 0) {\n//       readNews.push(targetNews);\n\n//       saveLS(FAIVORIT_NEWS, readNews);\n//       itemNews.classList.add('inFavorite');\n//       favoriteText.textContent = 'Remove from favorite';\n//     } else {\n//       readNews.splice(hasNews, 1);\n\n//       saveLS(FAIVORIT_NEWS, readNews);\n//       if (!readNews.length) removeLS(FAIVORIT_NEWS);\n//       itemNews.classList.remove('inFavorite');\n//       favoriteText.textContent = 'Add to favorite';\n//     }\n//   }\n// }\n\nconst readBlock = document.querySelector('#readNews');\nconsole.log(readBlock);\n//gallery.addEventListener('click', togleFaforite);\n//readBlock.addEventListener('click', addRead);\n\nreadBlock.addEventListener('click', togleFaforite);\n//\"nyt://article/536ba01e-197e-5ae0-8cef-256a82132ace\"\n//'nyt://article/536ba01e-197e-5ae0-8cef-256a82132ace';\n","import { saveLS, loadLS, removeLS } from './lStorage';\nimport { arrLastData } from './apiNews';\n\nconst FAIVORIT_NEWS = 'favoritNews';\nconst READ_NEWS = 'readNews';\n\nexport function checkFavorites(key) {\n  let favoritNews = loadLS(key);\n  const cardNews = Array.from(document.querySelectorAll('#cardNews'));\n\n  if (favoritNews) {\n    const allId = favoritNews.map(i => i.id);\n    cardNews.forEach(i => {\n      if (allId.includes(i.dataset.targetId)) {\n        i.classList.add('inFavorite');\n        const favoriteText = i.querySelector('#favorit-txt');\n        favoriteText.textContent = 'Remove from favorite';\n      }\n    });\n  }\n}\n\nexport function togleFaforite(e) {\n  if (e.target.classList.contains('js-tartet-favorite')) {\n    const itemNews = e.target.closest('.js-card-item');\n    const favoriteText = itemNews.querySelector('#favorit-txt');\n    const newsId = itemNews.dataset.targetId;\n\n    let favoritNews = loadLS(FAIVORIT_NEWS);\n    console.log(arrLastData);\n    let targetNews = arrLastData.find(i => i.id === newsId);\n    console.log(targetNews);\n    if (!favoritNews) {\n      favoritNews = [];\n      favoritNews.push(targetNews);\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      itemNews.classList.add('inFavorite');\n      favoriteText.textContent = 'Remove from favorite';\n      return;\n    }\n\n    const hasNews = favoritNews.findIndex(i => i.id === newsId);\n    //console.log(hasNews);\n    if (hasNews < 0) {\n      console.log(targetNews);\n      console.log(newsId);\n      favoritNews.push(targetNews);\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      itemNews.classList.add('inFavorite');\n      favoriteText.textContent = 'Remove from favorite';\n    } else {\n      favoritNews.splice(hasNews, 1);\n\n      saveLS(FAIVORIT_NEWS, favoritNews);\n      if (!favoritNews.length) removeLS(FAIVORIT_NEWS);\n      itemNews.classList.remove('inFavorite');\n      favoriteText.textContent = 'Add to favorite';\n    }\n  }\n}\n\nexport function addRead(e) {\n  e.preventDefault();\n  if (e.target.classList.contains('wrap-info__link')) {\n    const itemNews = e.target.closest('.js-card-item');\n    //  const favoriteText = itemNews.querySelector('#favorit-txt');\n    const newsId = itemNews.dataset.targetId;\n\n    let readNews = loadLS(READ_NEWS);\n    const targetNews = arrLastData.find(i => i.id === newsId);\n    const readDate = new Date().toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n    });\n    targetNews.readDate = readDate;\n\n    if (!readNews) {\n      readNews = [];\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n      itemNews.classList.add('inRead');\n      //favoriteText.textContent = 'Remove from favorite';\n      return;\n    }\n\n    const hasNews = readNews.findIndex(i => i.id === newsId);\n    //console.log(hasNews);\n    if (hasNews < 0) {\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n      itemNews.classList.add('inRead');\n      //favoriteText.textContent = 'Remove from favorite';\n    } else {\n      readNews.splice(hasNews, 1);\n      readNews.push(targetNews);\n      saveLS(READ_NEWS, readNews);\n      if (!readNews.length) removeLS(READ_NEWS);\n      itemNews.classList.remove('inRead');\n      //favoriteText.textContent = 'Add to favorite';\n    }\n  }\n}\n"],"names":["parcelRequire","$gEqtN","$7vGu6","$71100e529c5d647c$var$FAIVORIT_NEWS","$71100e529c5d647c$export$d50fb41c80be79e9","key","favoritNews","loadLS","cardNews","Array","from","document","querySelectorAll","allId","map","i","id","forEach","includes","dataset","targetId","classList","add","querySelector","textContent","$d34d931dc7b0c7b0$var$READ_NEWS","$d34d931dc7b0c7b0$var$FAIVORIT_NEWS","$d34d931dc7b0c7b0$var$gallery","$d34d931dc7b0c7b0$var$errorRequest","$d34d931dc7b0c7b0$var$renderFromLS","key1","arrLastData","length","push","readDate","console","log","remove","tempBlock","dateTitle","createElement","innerHTML","icon","append","dateBlock","createCard","join","pop","window","addEventListener","$d34d931dc7b0c7b0$var$readBlock","e","target","contains","itemNews","closest","favoriteText","newsId","targetNews","find","saveLS","hasNews","findIndex","splice","removeLS"],"version":3,"file":"read.5099525e.js.map"}